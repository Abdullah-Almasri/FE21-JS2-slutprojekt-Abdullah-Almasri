{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,0BCAAD,EAAAC,EAAA,S,aDOC,MACC,IAAIC,EAAaC,eAAeC,QAAQ,QACpCC,EAASF,eAAeC,QAAQ,cAChCE,EAAkB,OAAXD,EAAkBH,EAAaG,EAC1C,MAAME,GAAQ,EAAAP,EAAAQ,KAAIC,EAAAC,GAAI,mBAAmBJ,EAAKK,kBAC9C,EAAAX,EAAAY,KAAIL,GAAOM,MAAMC,IACf,GAAIA,EAASC,SAAU,CACrB,MAAMC,SAAEA,EAAQC,IAAEA,EAAGC,OAAEA,EAAMC,WAAEA,GAAeL,EAASM,MACzBC,SAASC,cAAc,aACjDC,IAAMJ,EAEV,MAAMK,EAAoBH,SAASC,cAAc,eAC3CG,EAAuBJ,SAASC,cAAc,aAC1BD,SAASC,cAAc,UAE5CI,UAAYT,EACjBQ,EAAQC,UAAYR,EACpBM,EAAKE,UAAYV,EACjBb,eAAewB,WAAW,aAC5B,IAEJ,EArBC,GCJM,WACL,MAAMC,EAAmBP,SAASQ,eAChC,kBAEFD,EAAiBE,MAAMC,QAAU,OAEjC,IAAI7B,EAAaC,eAAeC,QAAQ,QACpCC,EAASF,eAAeC,QAAQ,cAChC4B,EAAyB,OAAX3B,EAAkBH,EAAaG,EAC7CF,eAAeC,QAAQ,SAAW4B,IACpCJ,EAAiBE,MAAMC,QAAU,QAEjCH,EAAiBK,iBAAiB,SAAUC,IAE1C,GADuBC,QAAQ,iBACT,CACpB,MAAMC,GAAa,EAAApC,EAAAQ,KACjBC,EAAAC,GACA,mBAAqBP,eAAeC,QAAQ,SAE9CD,eAAekC,SACf,EAAArC,EAAAsC,QAAOF,GACPG,OAAOC,SAASC,KAAO,cACzB,MACEb,EAAiBE,MAAMC,QAAU,UAIzC,CDAA,IACA,EAAAW,EAAAC","sources":["src/modules/profile.ts","src/modules/deleteUser.ts"],"sourcesContent":["import { ref, get, DataSnapshot } from \"firebase/database\";\nimport { db } from \"./firebaseApp\";\nimport { logOut } from \"./logout\";\nimport { deleteProfile } from \"./deleteUser\";\n\n\n\n(() => {\n  let usernameID = sessionStorage.getItem(\"user\");\n  let target = sessionStorage.getItem(\"targetUser\");\n  let test = target === null ? usernameID : target;\n  const dbRef = ref(db, `/users/userInfo/${test.toLowerCase()}`);\n  get(dbRef).then((snapshot: DataSnapshot) => {\n    if (snapshot.exists()) {\n      const { username, bio, gender, profilePic } = snapshot.val();\n      const img: HTMLInputElement = document.querySelector(\"#ProfileP\");\n      img.src = profilePic;\n\n      const namn: HTMLElement = document.querySelector(\"#UsernameID\");\n      const genders: HTMLElement = document.querySelector(\"#genderID\");\n      const bios: HTMLElement = document.querySelector(\"#bioID\");\n\n      bios.innerText = bio;\n      genders.innerText = gender;\n      namn.innerText = username;\n      sessionStorage.removeItem(\"targetUser\");\n    }\n  });\n})();\n\ndeleteProfile();\nlogOut();\n","import { ref, remove } from \"firebase/database\";\nimport { db } from \"./firebaseApp\";\n\nexport function deleteProfile(): void {\n  const deleteProfileBtn = document.getElementById(\n    \"delete-account\"\n  ) as HTMLButtonElement;\n  deleteProfileBtn.style.display = \"none\";\n\n  let usernameID = sessionStorage.getItem(\"user\");\n  let target = sessionStorage.getItem(\"targetUser\");\n  let currentUser = target === null ? usernameID : target;\n  if (sessionStorage.getItem(\"user\") == currentUser) {\n    deleteProfileBtn.style.display = \"block\";\n\n    deleteProfileBtn.addEventListener(\"click\", (e) => {\n      let deleteAccountBtn = confirm(\"Are you sure?\");\n      if (deleteAccountBtn) {\n        const deleteUser = ref(\n          db,\n          \"/users/userInfo/\" + sessionStorage.getItem(\"user\")\n        );\n        sessionStorage.clear();\n        remove(deleteUser);\n        window.location.href = \"./index.html\";\n      } else {\n        deleteProfileBtn.style.display = \"none\";\n      }\n    });\n  }\n}\n"],"names":["$7WTbd","parcelRequire","usernameID","sessionStorage","getItem","target","test","dbRef","ref","$dNF4M","db","toLowerCase","get","then","snapshot","exists","username","bio","gender","profilePic","val","document","querySelector","src","namn","genders","innerText","removeItem","deleteProfileBtn","getElementById","style","display","currentUser","addEventListener","e","confirm","deleteUser","clear","remove","window","location","href","$ewOWp","logOut"],"version":3,"file":"profile.d83b2fdf.js.map"}